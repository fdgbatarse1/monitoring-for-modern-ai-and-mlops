# –û—Å–Ω–æ–≤—ã ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è Data Science

# –¢—å—é—Ç–æ—Ä–∏–∞–ª: ****–û—Å–Ω–æ–≤—ã ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è Data Science****

## **üëÄ¬†Overview**

üéì **–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?** –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤–∞—à–µ–º—É –≤–Ω–∏–º–∞–Ω–∏—é —Ç—å—é—Ç–æ—Ä–∏–∞–ª "–û—Å–Ω–æ–≤—ã ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è Data Science". –≠—Ç–æ –≤–∞—à –ø—É—Ç–µ–≤–æ–¥–∏—Ç–µ–ª—å –≤ –º–∏—Ä–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ML –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö. –ú—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∂–µ–º –≤–∞–º, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è, –Ω–æ –∏ —Ä–∞—Å—Å–∫–∞–∂–µ–º –æ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ Evidently, Great Expectations –∏ Grafana.

üë©üèª‚Äçüíª¬†**–î–ª—è –∫–æ–≥–æ —ç—Ç–æ—Ç —Ç—å—é—Ç–æ—Ä–∏–∞–ª?** –ï—Å–ª–∏ –≤—ã Data Scientist –∏–ª–∏ –Ω–∞—á–∏–Ω–∞—é—â–∏–π ML –∏–Ω–∂–µ–Ω–µ—Ä, —ç—Ç–æ—Ç –∫—É—Ä—Å –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –¥–ª—è –≤–∞—Å. –ú—ã –Ω–∞—á–Ω–µ–º —Å –æ—Å–Ω–æ–≤ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–π–¥–µ–º –∫ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º —Ç–µ–º–∞–º.

**üéØ¬†–ß—Ç–æ –≤–∞—Å –∂–¥–µ—Ç –≤ —ç—Ç–æ–º —Ç—å—é—Ç–æ—Ä–∏–∞–ª–µ?**

- –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –∑–∞–¥–∞—á–∞–º–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é Evidently.
- –ò–∑—É—á–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö —Å Great Expectations.
- –û—Å–≤–æ–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ML —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ Grafana.

üîç **–ö–∞–∫ —ç—Ç–æ —É—Å—Ç—Ä–æ–µ–Ω–æ?** –í–∞–º –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –¥–æ–ª–≥–æ –∏—Å–∫–∞—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –¢—å—é—Ç–æ—Ä–∏–∞–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.

‚è±Ô∏è¬†**–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è?** –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤—Å–µ–≥–æ 40 –º–∏–Ω—É—Ç, —á—Ç–æ–±—ã –ø–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ –º–∏—Ä ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –≤—ã–π—Ç–∏ –æ—Ç—Ç—É–¥–∞ —É–∂–µ –≥–æ—Ç–æ–≤—ã–º –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –Ω–æ–≤—ã—Ö –∑–Ω–∞–Ω–∏–π.

## **üë©‚Äçüíª¬†–£—Å—Ç–∞–Ω–æ–≤–∫–∞**

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ä–µ–¥—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç—å—é—Ç–æ—Ä–∏–∞–ª–æ–º –ø–æ ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É.

**1. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫ / –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–¥–∞. –≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ç—å—é—Ç–æ—Ä–∏–∞–ª–∞.

```bash
git clone https://gitlab.com/risomaschool/tutorials-raif/monitoring-1-get-started.git
cd monitoring-1-get-started
```

**2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** 

–î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è Python –≤–µ—Ä—Å–∏–∏ 3.9 –∏–ª–∏ –≤—ã—à–µ. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

```bash
python3 -m venv .venv
echo "export PYTHONPATH=$PWD" >> .venv/bin/activate
source .venv/bin/activate
pip install --upgrade pip setuptools wheel
pip install -r requirements-dev.txt
```

3.  **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ** 

–≠—Ç–æ—Ç —à–∞–≥ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ [–Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –∞—Ä–µ–Ω–¥–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤](https://archive.ics.uci.edu/ml/datasets/bike+sharing+dataset) –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é **`data/`**.

```bash
python src/load_data.py
```

**4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ MLflow UI**

To start the MLflow UI, run:

```bash
mlflow ui
```

And then navigate to [http://localhost:5000](http://localhost:5000) in your browser

**5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Jupyter Lab or Jupyter Notebook**

```bash
jupyter lab
```

## 1 - –ó–∞–¥–∞—á–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è Data Science

### –¢–∏–ø–∏—á–Ω—ã–π ML –ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è Batch Scoring

![Untitled](docs/images/Untitled.png)

–ü—Ä–µ–∂–¥–µ —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å –æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ, –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º —Ç–∏–ø–∏—á–Ω—ã–π ML –ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è batch scoring. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–æ–≤:

1. **T - 1 (–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –î–∞–Ω–Ω—ã—Ö)**: –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –º–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (History / Reference Data). –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –ø—Ä–æ—à–ª—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –º–æ–¥–µ–ª–∏ —É—á–∏—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö.
2. **T = 0 (–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ)**: –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –º–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (Current Data). –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –º–æ–¥–µ–ª—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π.
3. **T + 1 (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –û—Ü–µ–Ω–∫–∞)**: –ü–æ—Å–ª–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç —ç—Ç–∞–ø –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –ó–¥–µ—Å—å –¥–∞–Ω–Ω—ã–µ –æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö (Ground Truth Data) —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏ –º–æ–¥–µ–ª–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Ç–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏.

### –ó–∞–¥–∞—á–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ ML

- **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ):** –ù–∞ –±–∞–∑–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—ç–∫–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞.
- **–î–∞–Ω–Ω—ã–µ:** –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö. –í–∞–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –ø–æ–¥—Ö–æ–¥—è—Ç –ª–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∏ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏.
- **ML –ú–æ–¥–µ–ª—å:**  –ù–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∞–º–æ–π –º–æ–¥–µ–ª–∏ ML. –û—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏ –∑–∞–¥–∞—á–∞–º –∏ –µ–µ –¥–æ–≤–µ—Ä–∏–µ.
- **–ë–∏–∑–Ω–µ—Å –∏–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ KPI:** –ù–∞ –≤–µ—Ä—à–∏–Ω–µ –ø–∏—Ä–∞–º–∏–¥—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –±–∏–∑–Ω–µ—Å-—Ü–µ–ª—è–º–∏ –∏ –≤–ª–∏—è–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç.

![Source: [https://www.evidentlyai.com/blog/ml-monitoring-metrics](https://www.evidentlyai.com/blog/ml-monitoring-metrics) ](docs/images/Untitled%201.png)

Source: [https://www.evidentlyai.com/blog/ml-monitoring-metrics](https://www.evidentlyai.com/blog/ml-monitoring-metrics) 

–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ML –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è:

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥–µ–ª–∏ (Monitor Model)**: –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏ –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞–Ω–∞–ª–∏–∑ –µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö (Monitor Data)**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –º–æ–¥–µ–ª–∏.
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–º–µ—â–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π (Monitor Prediction Drift)**: –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö –º–æ–¥–µ–ª–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, –≤—ã—è–≤–ª–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è –∏ —É—Ö—É–¥—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è ML –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

![Untitled](docs/images/Untitled%202.png)

–î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ ML —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ä—è–¥ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –í –¥–∞–Ω–Ω–æ–º —Ç—å—é—Ç–æ—Ä–∏–∞–ª–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç—Ä–∏ –∏–∑ –Ω–∏—Ö:

- **Evidently**: –ü–æ–∑–≤–æ–ª—è–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –∏ –¥–∞–Ω–Ω—ã—Ö, –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å —Å–º–µ—â–µ–Ω–∏—è –≤ –ø—Ä–æ–≥–Ω–æ–∑–∞—Ö –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.
- **Great Expectations**: –ü–æ–º–æ–≥–∞–µ—Ç –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º.
- **Grafana**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—â–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## 2 - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ –æ—Ç—á–µ—Ç–∞–º–∏ Evidently

<aside>
üí° Jupyter Notebook with the example:  `1-getting-started-tutorial.ipynb`

</aside>

–ò–¥–µ—è Evidently –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞: –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å API –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–µ–π, –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∏—Ö –≤ —É–¥–æ–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã. –û—Ç—á–µ—Ç—ã —è–≤–ª—è—é—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏ –≤–∞—à–∏—Ö –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç—á–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö HTML –∏–ª–∏ JSON (—Å–Ω–∏–º–∫–∏). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Evidently –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è [–¥–ª—è online –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞](https://evidentlyai.com/blog/fastapi-tutorial) –∏ [batch —Å–∫–æ—Ä–∏–Ω–≥–∞](https://www.evidentlyai.com/blog/batch-ml-monitoring-architecture):

- —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç—á–µ—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Ñ–∞–π–ª–∞—Ö HTML –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏ –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö,
- –ø–æ–ª—É—á–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ö –≤–æ –≤–Ω–µ—à–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, PostgreSQL) –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Grafana),
- —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –æ—Ç—á–µ—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–∫–∞–∫ —Å–Ω–∏–º–∫–∏) –≤ —Ñ–∞–π–ª–∞—Ö JSON —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å [–ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Evidently](https://docs.evidentlyai.com/user-guide/monitoring/monitoring_overview) –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

![Untitled](docs/images/Untitled%203.png)

–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –≤—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ—Å—å  Evidently –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ ML –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö.   –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è Python. –í—ã –¥–æ–ª–∂–Ω—ã —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –∑–∞ 15 –º–∏–Ω—É—Ç.

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç Evidently

–î–ª—è –Ω–∞—á–∞–ª–∞, –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ Evidently, –∞ —Ç–∞–∫–∂–µ pandas, numpy –∏ –ø—Ä–∏–º–µ—Ä –¥–∞—Ç–∞—Å–µ—Ç–∞ `california_housing`. 

```python
import pandas as pd
import numpy as np

from sklearn.datasets import fetch_california_housing

from evidently import ColumnMapping

from evidently.report import Report
from evidently.metrics.base_metric import generate_column_metrics
from evidently.metric_preset import DataDriftPreset, TargetDriftPreset
from evidently.metrics import *

from evidently.test_suite import TestSuite
from evidently.tests.base_test import generate_column_tests
from evidently.test_preset import DataStabilityTestPreset, NoTargetPerformanceTestPreset
from evidently.tests import *

```

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–í –ø—Ä–∏–º–µ—Ä–∞—Ö —Ç—å—é—Ç–æ—Ä–∏–∞–ª–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –≥–æ—Ç–æ–≤—ã–º –Ω–∞–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –º–æ–¥–µ–ª–∏. –û–Ω–∏ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏ –∏—Å—Ç–∏–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∏–ª–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã.

–î–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫ –∞–Ω–∞–ª–∏–∑—É —Å–æ–∑–¥–∞–π—Ç–µ pandas.DataFrame:

```python
data = fetch_california_housing(as_frame=True)
housing_data = data.frame
```

–ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ–ª–æ–Ω–æ–∫ –≤ "target" –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–ª–æ–Ω–∫—É "prediction". –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –ø–æ—Ö–æ–∂ –Ω–∞ –ª–æ–≥–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏.

```python
housing_data.rename(columns={'MedHouseVal': 'target'}, inplace=True)
housing_data['prediction'] = housing_data['target'].values + np.random.normal(0, 5, housing_data.shape[0])

```

![Untitled](docs/images/Untitled%204.png)

–†–∞–∑–¥–µ–ª–∏—Ç–µ –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –≤–∑—è–≤ 5000 –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –∏ —Ç–µ–∫—É—â–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

```python
reference = housing_data.sample(n=5000, replace=False)
current = housing_data.sample(n=5000, replace=False)

```

–ü–µ—Ä–≤—ã–π `reference` –¥–∞—Ç–∞—Å–µ—Ç - —ç—Ç–æ —ç—Ç–∞–ª–æ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö. –í –∫–∞—á–µ—Å—Ç–≤–µ `reference`   –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏–ª–∏ –≤—ã–±–æ—Ä–∫—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ *production* –¥–∞–Ω–Ω—ã—Ö. –í—Ç–æ—Ä–æ–π `current` –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ —Ç–µ–∫—É—â–∏–µ *production* –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ  —Å—Ä–∞–≤–Ω–∏—Ç—å —Å —ç—Ç–∞–ª–æ–Ω–æ–º.

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ—Ç Evidently –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–≤–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞ ( `reference` –∏ `current` ) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤. 

![Original image: [https://docs.evidentlyai.com/user-guide/input-data/data-requirements](https://docs.evidentlyai.com/user-guide/input-data/data-requirements) ](docs/images/Untitled%205.png)

Original image: [https://docs.evidentlyai.com/user-guide/input-data/data-requirements](https://docs.evidentlyai.com/user-guide/input-data/data-requirements) 

<aside>
üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: 
- –î–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Å—Ö–µ–º–æ–π. 
- –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤–∑—è—Ç—å –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –∏ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
- –í—ã –º–æ–∂–µ—Ç–µ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ `reference` –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

</aside>

### –®–∞–≥ 3: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ Data Drift –æ—Ç—á–µ—Ç–æ–≤

–û—Ç—á–µ—Ç—ã **Evidently** –ø–æ–º–æ–≥–∞—é—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ —É—Å—Ç—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–µ–π. –û–Ω–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –±–æ–≥–∞—Ç—ã–º–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è–º–∏. –î–ª—è –Ω–∞—á–∞–ª–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Metric Presets** - ****—à–∞–±–ª–æ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –º–µ—Ç—Ä–∏–∫ –∏ –æ—Ç—á–µ—Ç—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á. 

–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å **Data Drift.** –≠—Ç–æ—Ç –ø—Ä–µ—Å–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –º–æ–¥–µ–ª–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–∑ –Ω–∏—Ö –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. 

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –æ—Ç—á–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç `Report`, –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –≤–∫–ª—é—á–∞–µ–º—ã–π –ø—Ä–µ—Å–µ—Ç –∏ —É–∫–∞–∂–∏—Ç–µ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –∏ —Ç–µ–∫—É—â–∏–µ –Ω–∞–±–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö:

```python
# –°–æ–∑–∞–¥–∏–º –æ—Ç—á–µ—Ç —Å –Ω—É–∂–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –º–µ—Ç—Ä–∏–∫ –∏–ª–∏ –ø—Ä–µ—Å–µ—Ç–æ–º
report = Report(metrics=[
    DataDriftPreset(),
])

# –ó–∞–ø—É—Å—Ç–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç—á–µ—Ç–∞
report.run(reference_data=reference, current_data=current)

# –î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞ –≤ Jupyter Notebook
report.show(mode='inline')
```

![Untitled](docs/images/Untitled%206.png)

–ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º–µ—Ç–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, –≤—ã —É–≤–∏–¥–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∞—Ä–≥–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. 

![Untitled](docs/images/Untitled%207.png)

### –®–∞–≥ 4: –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤

–û—Ç—á–µ—Ç—ã Evidently –æ–±–ª–∞–¥–∞—é—Ç –≤—ã—Å–æ–∫–æ–π —Å—Ç–µ–ø–µ–Ω—å—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç–∏. –í—ã –º–æ–∂–µ—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤–∫–ª—é—á–∞—Ç—å –∏ –∫–∞–∫ –∏—Ö —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫, –æ—Ü–µ–Ω–∏–≤–∞—é—â–∏—Ö –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å—Ç–æ–ª–±—Ü–∞.

```python
report = Report(metrics=[
    ColumnSummaryMetric(column_name='AveRooms'),
    ColumnQuantileMetric(column_name='AveRooms', quantile=0.25),
    ColumnDriftMetric(column_name='AveRooms')
])

report.run(reference_data=reference, current_data=current)
report

```

–í—ã —É–≤–∏–¥–∏—Ç–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫.

![Untitled](docs/images/Untitled%208.png)

<aside>
üí° –ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º [Quickstart for Reports and Tests](https://docs.evidentlyai.com/get-started/tutorial#4.-get-the-data-drift-report)

</aside>

–í—ã –º–æ–∂–µ—Ç–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã —Å –æ–±—ä–µ–∫—Ç Python –∏–ª–∏ JSON –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å HTM–î —Ñ–∞–π–ª. 

```python
report.as_dict() # –£–¥–æ–±–Ω–æ –¥–ª—è –ø–∞—Ä–º–∏–Ω–≥–∞ –æ—Ç—á–µ—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
report.save_html("file.html") # –£–¥–æ–±–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ 
```

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–≤–æ–¥ –≤ –≤–∏–¥–µ snapshot Evidently JSON. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º —Å –ø–æ–º–æ—â—å—é [ML Evidently Dashboards.](https://docs.evidentlyai.com/get-started/tutorial-monitoring)

```python
report.save("snapshot.json")
```

## 3 - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –º–æ–¥–µ–ª–µ–π –∏ –¥–∞–Ω–Ω—ã—Ö —Å Evidently –∏ MLflow

<aside>
üí° Jupyter Notebook with the example:  `2-monitor-model.ipynb`

</aside>

### **–®–∞–≥ 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è UCI](https://archive.ics.uci.edu/ml/datasets/bike+sharing+dataset) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏—Ö –ª–æ–∫–∞–ª—å–Ω–æ. –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –≤—Ö–æ–¥–Ω—ã–µ –¥–ª—è –º–æ–¥–µ–ª–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π.

```bash
# Download original dataset with: python src/pipelines/load_data.py 
raw_data = pd.read_csv(f"../{DATA_DIR}/{FILENAME}")

# Set datetime index 
raw_data = raw_data.set_index('dteday')

raw_data.head()
```

![Untitled](docs/images/Untitled%209.png)

### –®–∞–≥ 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–ª–æ–Ω–æ–∫

–£–∫–∞–∂–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –∏ —á–∏—Å–ª–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏, —á—Ç–æ–±—ã Evidently –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ–≤–æ–¥–∏–ª —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö. –•–æ—Ç—è Evidently –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–ª–æ–Ω–æ–∫ –ø–æ–º–æ–∂–µ—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏.

```python
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
target = 'cnt'
prediction = 'prediction'
numerical_features = ['temp', 'atemp', 'hum', 'windspeed', 'mnth', 'hr', 'weekday']
categorical_features = ['season', 'holiday', 'workingday']

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ column_mapping
column_mapping = ColumnMapping()
column_mapping.target = target
column_mapping.prediction = prediction
column_mapping.numerical_features = numerical_features
column_mapping.categorical_features = categorical_features

```

### –®–∞–≥ 3. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ train –∏ test –¥–∞—Ç–∞—Å–µ—Ç—ã, –∏ –æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ `RandomForestRegressor`.

```python
# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
sample_data = raw_data.set_index('dteday').loc['2011-01-01 00:00:00':'2011-01-28 23:00:00']

X_train, X_test, y_train, y_test = model_selection.train_test_split(
    sample_data[numerical_features + categorical_features],
    sample_data[target],
    test_size=0.3
)
regressor = ensemble.RandomForestRegressor(random_state = 0, n_estimators = 50)
regressor.fit(X_train, y_train)
```

### –®–∞–≥ 4. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞ –æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ —Å–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∫–∞–∫ –¥–ª—è –æ–±—É—á–∞—é—â–µ–≥–æ, —Ç–∞–∫ –∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç—á–µ—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ `RegressionPreset` –æ—Ç Evidently.

```python
# –†–∞—Å—á–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
preds_train = regressor.predict(X_train)
preds_test = regressor.predict(X_test)

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∫ –Ω–∞–±–æ—Ä–∞–º –¥–∞–Ω–Ω—ã—Ö `train` –∏ `test`
X_train['target'] = y_train
X_train['prediction'] = preds_train
X_test['target'] = y_test
X_test['prediction'] = preds_test

```

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –≤ –Ω–∞–±–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é `RegressionPreset` –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Evidently. –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –Ω–∞–±–æ—Ä–µ. –ó–∞—Ç–µ–º –∏–∑–≤–ª–µ–∫–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞ (ME) –∏ —Å—Ä–µ–¥–Ω—è—è –∞–±—Å–æ–ª—é—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ (MAE), –∏–∑ –æ—Ç—á–µ—Ç–∞. –≠—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏ –¥–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –º–æ–¥–µ–ª–∏. –ò—Ö –ª–æ–≥–∏—á–Ω–æ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ MLflow!

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ —Å RegressionPreset
regression_performance_report = Report(metrics=[
    RegressionPreset(),
])
regression_performance_report.run(
    reference_data=X_train,
    current_data=X_test,
    column_mapping=column_mapping)

# –ò–∑–≤–ª–µ—á –µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∏–∑ –æ—Ç—á–µ—Ç–∞
train_report_metrics = regression_performance_report.as_dict()
me = train_report_metrics['metrics'][0]['result']['current']['mean_error']
mae = train_report_metrics['metrics'][0]['result']['current']["mean_abs_error"]

```

–ú–æ–∂–Ω–æ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –ø—Ä—è–º–æ –≤ Jupyter Notebook –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É 

```bash
regression_performance_report.show(mode='inline')
```

![Untitled](docs/images/Untitled%2010.png)

## 4- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö —Å Great Expectations

Great Expectations - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–æ–º –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å "–æ–∂–∏–¥–∞–Ω–∏—è" –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å Great Expectations –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä—è–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫:

```bash
import datetime
import numpy as np
import pandas as pd

import great_expectations as gx

from matplotlib import pyplot as plt

%matplotlib inline

```

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–î–∞–ª–µ–µ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

```bash
!wget <https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2019-01.parquet>

df = pd.read_parquet('yellow_tripdata_2019-01.parquet')
sample_df = df.sample(10000)

df_gx = gx.dataset.PandasDataset(sample_df)
df_gx.head(2)

```

### –®–∞–≥ 3: –û–±–∑–æ—Ä –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:

```bash
df_gx.dtypes
plt.hist(df_gx['payment_type'])
plt.hist(df_gx['passenger_count'])

```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏–π

Great Expectations –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–±–æ—Ä—ã –æ–∂–∏–¥–∞–Ω–∏–π (suites), –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏–ª–∏ —É—Å–ª–æ–≤–∏—è, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ –∫ –≤–∞—à–∏–º –¥–∞–Ω–Ω—ã–º. –≠—Ç–∏ –Ω–∞–±–æ—Ä—ã –æ–∂–∏–¥–∞–Ω–∏–π –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±—É–¥—É—â–µ–º.

```bash
df_gx.expect_column_values_to_be_between(column='payment_type', min_value=0, max_value=3, mostly=0.9)
df_gx.expect_column_values_to_be_of_type(column='payment_type', type_='int64')

```

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–∂–∏–¥–∞–Ω–∏–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–∞ `payment_type` –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –∏ –∏–º–µ—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–∏ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–º–æ–≥—É—Ç –Ω–∞–º —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º –∫–∞—á–µ—Å—Ç–≤–∞.

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Great Expectations:

```bash
context = gx.get_context()
```

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

```bash
df = pd.read_parquet('yellow_tripdata_2019-01.parquet')
train = df.head(1000)
test = df.tail(1000)
train.to_csv('train.csv', index=False)
test.to_csv('test.csv', index=False)

validator = context.sources.pandas_default.read_csv("train.csv")
```

–°–æ–∑–¥–∞–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫ –Ω–µ–º—É –∞–∫—Ç–∏–≤:

```bash
datasource_name = 'tripdata_train'
datasource = context.sources.add_pandas(datasource_name)

asset_name = 'tripdata_asset'
path_to_data = '/content/train.csv'
asset = datasource.add_csv_asset(asset_name, filepath_or_buffer=path_to_data)

batch_request = asset.build_batch_request()

```

–ò–∑–≤–ª–µ–∫–∏—Ç–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∞–π—Ç–µ –ø–∞—Ä—Ç–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

```bash
tripdata_asset = context.get_datasource("tripdata_train").get_asset("tripdata_asset")
my_batch_request = tripdata_asset.build_batch_request()
batches = tripdata_asset.get_batch_list_from_batch_request(my_batch_request)

for batch in batches:
    print(batch.batch_spec)

```

### –®–∞–≥ 5: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞–±–æ—Ä –æ–∂–∏–¥–∞–Ω–∏–π ( `suite` )

–°–æ–∑–¥–∞–π—Ç–µ –Ω–∞–±–æ—Ä –æ–∂–∏–¥–∞–Ω–∏–π –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫ –Ω–µ–º—É –ø—Ä–∞–≤–∏–ª–∞:

```bash
suite = context.add_expectation_suite(expectation_suite_name="taxi_suite")
context.add_or_update_expectation_suite("taxi_suite")

validator = context.get_validator(
    batch_request=batch_request,
    expectation_suite_name="taxi_suite",
)
validator.head()

expectation_validation_result = validator.expect_column_values_to_not_be_null(
    column="VendorID"
)
print(expectation_validation_result)

validator.expect_column_values_to_not_be_null("payment_type")
validator.expect_column_values_to_be_between(column='payment_type', min_value=0, max_value=4)
validator.expect_column_values_to_be_of_type(column='payment_type', type_='int64')
validator.expect_column_values_to_not_be_null(column = "tip_amount", mostly = .9)

validator.save_expectation_suite(discard_failed_expectations=False)

```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –æ–∂–∏–¥–∞–Ω–∏–π –≤ —Ñ–∞–π–ª JSON –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
import json

with open("taxi_suite.json", "w") as my_file:
    my_file.write(
        json.dumps(suite.to_json_dict())
    )

suite.show_expectations_by_expectation_type()

from great_expectations.core.expectation_suite import ExpectationConfiguration

updated_config = ExpectationConfiguration(
    expectation_type="expect_column_values_to_be_between",
    kwargs={
        "auto": True,
        "column": "passenger_count",
        "domain": "column",
        "min_value": 1,
        "max_value": 4,
        "mostly": 1.0,
    },
)
suite.add_expectation(updated_config)

context.save_expectation_suite(suite)
with open("taxi_suite.json", "w") as my_file:
    my_file.write(
        json.dumps(suite.to_json_dict())
    )

```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ –Ω–∞–±–æ—Ä –æ–∂–∏–¥–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±—É–¥—É—â–µ–º.

### –®–∞–≥ 6: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å Great Expectations

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞–±–æ—Ä–∞ –æ–∂–∏–¥–∞–Ω–∏–π (suite), –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ª–∏ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º –∫–∞—á–µ—Å—Ç–≤–∞.

–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:

```bash
test = pd.read_csv("test.csv")

datasource_name = 'tripdata_test'
datasource = context.sources.add_pandas(datasource_name)

asset_name = 'triptest_asset'
path_to_data = '/content/test.csv'
asset = datasource.add_csv_asset(asset_name, filepath_or_buffer=path_to_data)

batch_request = asset.build_batch_request()
batch_list = asset.get_batch_list_from_batch_request(batch_request)
batch_request_list = [batch.batch_request for batch in batch_list]

```

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (validations), —É–∫–∞–∑–∞–≤ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–∞—Ä—Ç–∏–∏ –¥–∞–Ω–Ω—ã—Ö (batch requests) –∏ –∏–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –æ–∂–∏–¥–∞–Ω–∏–π:

```bash
validations = [
    {"batch_request": batch.batch_request, "expectation_suite_name": "taxi_suite"}
    for batch in batch_list
]
```

–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Ç–æ—á–∫—É (checkpoint) –≤ Great Expectations, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö:

```bash
checkpoint = context.add_or_update_checkpoint(
    name="my_taxi_validator_checkpoint", validations=validations
)

checkpoint_result = checkpoint.run()
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –æ–∂–∏–¥–∞–Ω–∏—è–º–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.

## **üîó Additional Resources**

- **ML serving and monitoring with FastAPI and Evidently** [https://www.evidentlyai.com/blog/fastapi-tutorial](https://www.evidentlyai.com/blog/fastapi-tutorial)
- ****Batch ML monitoring blueprint: Evidently, Prefect, PostgreSQL, and Grafana****  [https://www.evidentlyai.com/blog/batch-ml-monitoring-architecture](https://www.evidentlyai.com/blog/batch-ml-monitoring-architecture)